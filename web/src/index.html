<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>cbor2 playground</title>
  <style>
    body {
      display: none;
      background-color: cornsilk;
    }
  </style>
  <!-- <link href="https://cdn.jsdelivr.net/npm/vscode-codicons@0.0.17/dist/codicon.min.css" rel="stylesheet"> -->
</head>

<body>
  <h2>CBOR converter</h2>

  <div class="container">
    <div class="input col">
      <h3>Input</h3>
      <div class="cmd">
        <select id="input-fmt">
          <option>diagnostic</option>
          <option>JSON</option>
          <option>js</option>
          <option>hex</option>
          <option>base64</option>
          <option>base64url</option>
        </select>
        <span id="to">&rarr;&rarr;&rarr; to &rarr;&rarr;&rarr;</span>
      </div>
      <div id="input-text" class="monaco"></div>
      <button class="accordion">Encoding Options</button>
      <ul id="encodeOpts" class="panel">
        <li>
          <input type="checkbox" id="cdeEncode">
          <label for="cdeEncode" title="Turn on options for draft-ietf-cbor-cde-05.">cde</label>
        </li>
        <li>
          <input type="checkbox" id="dcborEncode" checked>
          <label for="dcborEncode" title="Turn on options for draft-mcnally-deterministic-cbor-11.">dcbor</label>
        </li>
        <hr>
        <li>
          <input type="checkbox" id="avoidIntsEncode">
          <label for="avoidIntsEncode"
            title="Encode all integers as floating point numbers of the correct size.">avoidInts</label>
        </li>
        <li>
          <input type="checkbox" id="collapseBigIntsEncode" checked>
          <label for="collapseBigIntsEncode"
            title="Should bigints that can fit into normal integers be collapsed into normal integers?">collapseBigInts</label>
        </li>
        <li>
          <label for="dateTag"
            title="Which tag to use to encode Date objects?">dateTag</label>
          <select id="dateTag">
            <option value="0">0 (RFC 3339 String)</option>
            <option value="1" selected>1 (Float from epoch)</option>
            <option value="100">100 (Number of dates from epoch)</option>
            <option value="1004">1004 (RFC 3339 Full-Date)</option>
          </select>
        </li>
        <li>
          <input type="checkbox" id="float64Encode">
          <label for="float64Encode"
            title="When writing floats, always use the 64-bit version.  Often combined with `avoidInts`.">float64</label>
        </li>
        <li>
          <input type="checkbox" id="flushToZero">
          <label for="flushToZero"
            title="When writing floats, first flush any subnormal numbers to zero before deciding on encoding.">flushToZero</label>
        </li>
        <li>
          <label for="forceEndian"
            title="How to write TypedArrays? Null to use the current platform's endian-ness. True to always use little-endian. False to always use big-endian.">forceEndian</label>
          <select id="forceEndian">
            <option selected>null</option>
            <option>true</option>
            <option>false</option>
          </select>
        </li>
        <li>
          <input type="checkbox" id="ignoreGlobalTagsEncode">
          <label for="ignoreGlobalTagsEncode"
            title="Do not consider the global tag registry when encoding tags.">ignoreGlobalTags</label>
        </li>
        <li>
          <input type="checkbox" id="ignoreOriginalEncoding">
          <label for="ignoreOriginalEncoding"
            title="Ignore sizes on boxed numbers; they might be overly-large.">ignoreOriginalEncoding</label>
        </li>
        <li>
          <input type="checkbox" id="largeNegativeAsBigIntEncode">
          <label for="largeNegativeAsBigIntEncode"
            title="Do not encode numbers in the range  [CBOR_NEGATIVE_INT_MAX ... STANDARD_NEGATIVE_INT_MAX - 1] as MT 1.">largeNegativeAsBigInt</label>
        </li>
        <li>
          <input type="checkbox" id="reduceUnsafeNumbers">
          <label for="reduceUnsafeNumbers"
            title="For DCBOR, reduce numbers outside of JS safe integer range that have no fractional part to dubiously-correct integers.">reduceUnsafeNumbers</label>
        </li>
        <li>
          <input type="checkbox" id="rejectBigIntsEncode">
          <label for="rejectBigIntsEncode"
            title="Do not encode bigints that cannot be reduced to integers.">rejectBigInts</label>
        </li>
        <li>
          <input type="checkbox" id="rejectCustomSimplesEncode">
          <label for="rejectCustomSimplesEncode"
            title="Throw an error when an instance of Simple is encoded.">rejectCustomSimples</label>
        </li>
        <li>
          <input type="checkbox" id="rejectDuplicateKeysEncode">
          <label for="rejectDuplicateKeysEncode"
            title="Check that Maps do not contain keys that encode to the same bytes as one another.  This is possible in a Map with object keys.">rejectDuplicateKeys</label>
        </li>
        <li>
          <input type="checkbox" id="rejectFloatsEncode">
          <label for="rejectFloatsEncode"
            title="Do not encode floating point numbers that cannot be reduced to integers.">rejectFloats</label>
        </li>
        <li>
          <input type="checkbox" id="rejectUndefinedEncode">
          <label for="rejectUndefinedEncode" title="Error instead of encoding `undefined`.">rejectUndefined</label>
        </li>
        <li>
          <input type="checkbox" id="simplifyNegativeZeroEncode">
          <label for="simplifyNegativeZeroEncode" title="Encode -0 as 0.">simplifyNegativeZero</label>
        </li>
        <li>
          <label for="sortKeysEncode"
            title="How should the key/value pairs be sorted before an object or Map gets encoded?  If null, no sorting is performed.  Modern protocols use coreDeterministic, older ones use lengthFirstDeterministic.">sortKeys</label>
          <select id="sortKeysEncode">
            <option selected>null</option>
            <option>coreDeterministic</option>
            <option>lengthFirstDeterministic</option>
          </select>
        </li>
        <li>
          <label for="stringNormalization" title="Normalize strings on encoding.">stringNormalization</label>
          <select id="stringNormalization">
            <option selected>null</option>
            <option>NFC</option>
            <option>NFD</option>
            <option>NFKC</option>
            <option>NFKD</option>
          </select>
        </li>
        <li>
          <input type="checkbox" id="wtf8Encode">
          <label for="wtf8Encode"
            title="Allow non-wellformed strings (strings containing unpaired surrogates) to be encoded as tag 273.">wtf8</label>
        </li>
      </ul>
    </div>
    <div class="output col">
      <h3>Output</h3>
      <div class="cmd">
        <select id="output-fmt">
          <option>commented</option>
          <option>diagnostic</option>
          <option>hex</option>
          <option>base64</option>
          <option>base64url</option>
          <option>js</option>
          <option>JSON</option>
        </select>
        <button id="copy">Copy to input</button>
      </div>
      <div id="output-text" class="monaco"></div>
      <button class="accordion">Decoding Options</button>
      <ul id="decodeOpts" class="panel">
        <li>
          <input type="checkbox" id="cde">
          <label for="cde" title="Turn on all options for draft-ietf-cbor-cde-05.">cde</label>
        </li>
        <li>
          <input type="checkbox" id="dcbor">
          <label for="dcbor" title="Turn on all options for draft-mcnally-deterministic-cbor-11.">dcbor</label>
        </li>
        <hr>
        <li>
          <input type="checkbox" id="boxed">
          <label for="boxed"
            title="Should numbers and strings be created as boxed instances, which retain their original encoding for round-tripping?">boxed</label>
        </li>
        <li>
          <input type="checkbox" id="convertUnsafeIntsToFloat">
          <label for="convertUnsafeIntsToFloat"
            title="In dCBOR, JS numbers between 2^53 and 2^64 get encoded as CBOR integers.  When decoding, present them as JS numbers instead of BigInt, losing accuracy.">convertUnsafeIntsToFloat</label>
        </li>
        <li>
          <label for="diagnosticSizes"
            title="When producing diagnostic output, should the size of an element always be appended to that element using an underscore when calling diagnose?">diagnosticSizes</label>
          <select id="diagnosticSizes">
            <option value="0" selected>PREFERRED</option>
            <option value="1">ALWAYS</option>
            <option value="-1">NEVER</option>
          </select>
        </li>
        <li>
          <input type="checkbox" id="ignoreGlobalTagsDecode">
          <label for="ignoreGlobalTagsDecode"
            title="Do not consider the global tag registry when decoding tags.">ignoreGlobalTags</label>
        </li>
        <li>
          <input type="checkbox" id="keepNanPayloads">
          <label for="keepNanPayloads"
            title="Keep NaN payloads by creating an instance of NAN when needed.  Ignored if rejectLongLoundNaN is true.">keepNanPayloads</label>
        </li>
        <li>
          <input type="checkbox" id="preferBigInt">
          <label for="preferBigInt"
            title="Always generate bigint numbers from CBOR integers (major type 0 or 1).">preferBigInt</label>
        </li>
        <li>
          <input type="checkbox" id="preferMap">
          <label for="preferMap"
            title="Always generate Map instances when decoding, instead of trying to generate object instances when all of the keys are strings.">preferMap</label>
        </li>
        <li>
          <input type="checkbox" id="pretty">
          <label for="pretty" title="Pretty-print diagnostic format.">pretty</label>
        </li>
        <li>
          <input type="checkbox" id="rejectLargeNegatives">
          <label for="rejectLargeNegatives"
            title="Reject negative integers in the range [CBOR_NEGATIVE_INT_MAX ... STANDARD_NEGATIVE_INT_MAX - 1].">rejectLargeNegatives</label>
        </li>
        <li>
          <input type="checkbox" id="rejectBigInts">
          <label for="rejectBigInts"
            title="If there are bigint (tag 2/3) in the incoming data, throw an exception.">rejectBigInts</label>
        </li>
        <li>
          <input type="checkbox" id="rejectDuplicateKeys">
          <label for="rejectDuplicateKeys"
            title="If there are duplicate keys in a map, throw an exception.">rejectDuplicateKeys</label>
        </li>
        <li>
          <input type="checkbox" id="rejectFloats">
          <label for="rejectFloats" title="Reject any floating point numbers.">rejectFloats</label>
        </li>
        <li>
          <input type="checkbox" id="rejectInts">
          <label for="rejectInts" title="Reject any mt 0/1 numbers.">rejectInts</label>
        </li>
        <li>
          <input type="checkbox" id="rejectLongFloats">
          <label for="rejectLongFloats"
            title="Reject floating point numbers that should have been encoded in shorter form, including having been encoded as an integer.">rejectLongFloats</label>
        </li>
        <li>
          <input type="checkbox" id="rejectLongLoundNaN">
          <label for="rejectLongLoundNaN" title="Reject NaNs that are not encoded as 0x7e00.">rejectLongLoundNaN</label>
        </li>
        <li>
          <input type="checkbox" id="rejectNegativeZero">
          <label for="rejectNegativeZero"
            title="If negative zero (-0.0) is received, throw an error.">rejectNegativeZero</label>
        </li>
        <li>
          <input type="checkbox" id="rejectSimple">
          <label for="rejectSimple"
            title="Reject simple values other than true, false, undefined, and null.">rejectSimple</label>
        </li>
        <li>
          <input type="checkbox" id="rejectStreaming">
          <label for="rejectStreaming" title="Reject any attempt to decode streaming CBOR.">rejectStreaming</label>
        </li>
        <li>
          <input type="checkbox" id="rejectSubnormals">
          <label for="rejectSubnormals" title="Reject subnormal floating point numbers.">rejectSubnormals</label>
        </li>
        <li>
          <label for="rejectStringsNotNormalizedAs"
            title="Reject strings that are not normalized with the given normalization form.">rejectStringsNotNormalizedAs</label>
          <select id="rejectStringsNotNormalizedAs">
            <option selected>null</option>
            <option>NFC</option>
            <option>NFD</option>
            <option>NFKC</option>
            <option>NFKD</option>
          </select>
        </li>
        <li>
          <input type="checkbox" id="rejectUnsafeFloatInts">
          <label for="rejectUnsafeFloatInts"
            title="For dCBOR, reject &quot;integers&quot; between 2^53 and 2^64 that were encoded as floats.">rejectUnsafeFloatInts</label>
        </li>
        <li>
          <input type="checkbox" id="rejectUndefined">
          <label for="rejectUndefined" , title="Reject the `undefined` simple value.">rejectUndefined</label>
        </li>
        <li>
          <input type="checkbox" id="requirePreferred">
          <label for="requirePreferred"
            title="Reject integers and additional-information lengths that could have been encoded in a smaller encoding.  Usually rejectLongFloats is desired as well.">requirePreferred</label>
        </li>
        <li>
          <input type="checkbox" id="saveOriginal">
          <label for="saveOriginal"
            title="Save the original bytes associated with every object as a property of that object, for exact round-tripping.">saveOriginal</label>
        </li>
        <li>
          <label for="sortKeysDecode" title="Keys being decoded MUST be in this order.">sortKeys</label>
          <select id="sortKeysDecode">
            <option selected>null</option>
            <option>coreDeterministic</option>
            <option>lengthFirstDeterministic</option>
          </select>
        </li>
      </ul>
      <div class="power">
        Powered by <a href="https://github.com/hildjj/cbor2/">cbor2<span id="cbor2-version"></span></span></a> and
        <a href="https://github.com/hildjj/cbor-edn/">cbor-edn<span id="cbor-edn-version"></span></a>.
        <a href="https://github.com/hildjj/cbor2/tree/main/web">Source</a>
      </div>
    </div>
  </div>
</body>

</html>
